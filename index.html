<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="好像没什么比自由更加重要了">
<meta property="og:type" content="website">
<meta property="og:title" content="乱里库码">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="乱里库码">
<meta property="og:description" content="好像没什么比自由更加重要了">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="乱里库码">
<meta name="twitter:description" content="好像没什么比自由更加重要了">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>乱里库码</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">乱里库码</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/30/iOS逆向（一）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/30/iOS逆向（一）/" itemprop="url">iOS逆向（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-30T11:14:36+08:00">
                2018-10-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS逆向/" itemprop="url" rel="index">
                    <span itemprop="name">iOS逆向</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="iOS逆向"><a href="#iOS逆向" class="headerlink" title="iOS逆向"></a>iOS逆向</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li>真机</li>
<li>砸壳后的ipa包</li>
<li>MonkeyDev</li>
<li>Cycript环境</li>
</ul>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>新建一个项目，选择<code>MonkeyAPP</code>，将破壳的ipa放入<code>TargetApp</code>文件夹中，直接运行进入app</p>
<h2 id="cycript"><a href="#cycript" class="headerlink" title="cycript"></a>cycript</h2><p>在命令行输入 cycript -r 192.168.xx.xxx:6666（手机的Wi-Fi ip地址）<br>可以在里面获取变量内存地址，定义变量，以及修改属性，查看子控件树等操作。</p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var keyWindow = UIWindow.keyWindow()</div><div class="line">// 得到具体信息</div><div class="line">// &quot;&lt;iConsoleWindow: 0x107e51520; baseClass = UIWindow; frame = (0 0; 375 667); gestureRecognizers = &lt;NSArray: 0x28281b690&gt;; layer = &lt;UIWindowLayer: 0x282519720&gt;&gt;&quot;</div><div class="line"></div><div class="line">*keyWindow</div><div class="line">// 获取变量以及子控件信息</div><div class="line"></div><div class="line">// 修改变量</div><div class="line">#0x107e51520.frame = CGRectMake(20, 20, 40, 40)   // (#内存地址)</div><div class="line"></div><div class="line">// 查询控件</div><div class="line">choose(UILabel)</div></pre></td></tr></table></figure>
<h2 id="通过Xcode的面包机查看-Debug-View-Hierarchy"><a href="#通过Xcode的面包机查看-Debug-View-Hierarchy" class="headerlink" title="通过Xcode的面包机查看(Debug View Hierarchy)"></a>通过Xcode的面包机查看(Debug View Hierarchy)</h2><p>通过面包机可以更快的获取控件的内存地址，从而修改变量</p>
<p><img src="http://phedr629q.bkt.clouddn.com/2018-10-30-3C8CBAFC-51E3-47C2-A20F-3723D10233C1.png" alt="3C8CBAFC-51E3-47C2-A20F-3723D10233C1"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/10/pipenv使用-python包管理工具/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/10/pipenv使用-python包管理工具/" itemprop="url">pipenv使用-python包管理工具</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-10T15:59:13+08:00">
                2018-10-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="pipenv简介"><a href="#pipenv简介" class="headerlink" title="pipenv简介"></a>pipenv简介</h2><p>pipenv是python官方推荐的包管理工具，方便管理python的虚拟环境和库，集成了virtualenv，pyenv和pip三者的功能于一身。能够自动为项目创建和管理虚拟环境，从<code>Pipfile</code>文件中添加或者删除包，同事生成<code>Pipfile.lock</code>文件锁定安装包的版本和依赖信息，避免构建错误。</p>
<p>为什么要用pipenv呢？或者说原来的三个工具不是也直接用么？</p>
<p>直接用virtualenv可能会导致的问题：</p>
<ul>
<li>必须手动安装或删除某些特定版本的包，并定期更新requirements.txt文件，以保持项目环境一致</li>
<li>有时项目需要有多个requirements.txt文件，比如开发用dev-requirements.txt，现有的模式不满足</li>
<li>卸载包的时候只是卸载自己，不能处理相关依赖项</li>
</ul>
<p>pipenv主要解决的问题：</p>
<ul>
<li>不需要单独使用virtualenv，pyenv和pip，把他们结合在一起。</li>
<li>不用维护requirements.txt文件</li>
<li>在开发环境中使用多个python版本</li>
<li>在安装pyenv的条件下，可以自动安装需要的python版本</li>
<li>随时查看图形化的依赖关系</li>
<li>其他</li>
</ul>
<h2 id="安装pipenv"><a href="#安装pipenv" class="headerlink" title="安装pipenv"></a>安装pipenv</h2><p>以下是Mac的环境</p>
<h3 id="使用pip安装"><a href="#使用pip安装" class="headerlink" title="使用pip安装"></a>使用pip安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pip install --user pipenv</div></pre></td></tr></table></figure>
<p>这个命令在用户级别下安装pipenv。如果安装后在shell中找不到pipenv命令，需要添加当前python用户主目录的bin目录到PATH环境变量。如果不知道python用户主目录在哪里，输入以下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ python -m site --user-base</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/Users/xxx/Library/Python/2.7</div></pre></td></tr></table></figure>
<h3 id="使用brew安装"><a href="#使用brew安装" class="headerlink" title="使用brew安装"></a>使用brew安装</h3><p>直接使用brew安装即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install pipenv</div></pre></td></tr></table></figure>
<p>接下来会提示升级pipenv：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew upgrade pipenv</div></pre></td></tr></table></figure>
<h3 id="shell自动补齐"><a href="#shell自动补齐" class="headerlink" title="shell自动补齐"></a>shell自动补齐</h3><p>在Linux或者Mac环境下，在<code>.bashrc</code>或<code>.zshrc</code>添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">eval &quot;$(pipenv --completion)&quot;</div></pre></td></tr></table></figure>
<h2 id="使用pipenv"><a href="#使用pipenv" class="headerlink" title="使用pipenv"></a>使用pipenv</h2><h3 id="创建环境"><a href="#创建环境" class="headerlink" title="创建环境"></a>创建环境</h3><p>新建一个目录，安装指定python的版本信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir test_pipenv &amp; cd test_pipenv</div><div class="line">$ pipenv install  	// pipenv install --three</div></pre></td></tr></table></figure>
<p>如果指定了 <code>--two</code>或<code>--three</code>，则会使用python2或者python3的版本安装，否则将使用默认的python版本来安装。</p>
<p>也可以指定版本信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ pipenv install --python 3</div><div class="line">$ pipenv install --python 3.6</div><div class="line">$ pipenv install --python 2.7.14</div></pre></td></tr></table></figure>
<h3 id="安装第三方库"><a href="#安装第三方库" class="headerlink" title="安装第三方库"></a>安装第三方库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv install urllib3</div></pre></td></tr></table></figure>
<p>也可以安装指定包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv install urllib3==1.22</div></pre></td></tr></table></figure>
<p>Pipfile中的<code>source</code>是设置仓库地址，<code>packages</code>是指定项目依赖的包，<code>dev-packages</code>是指定开发环境需要的包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[[source]]</div><div class="line">url = &quot;https://pypi.org/simple&quot;</div><div class="line">verify_ssl = true</div><div class="line">name = &quot;pypi&quot;</div><div class="line"></div><div class="line">[packages]</div><div class="line">&quot;urllib3&quot; = &quot;*&quot;</div><div class="line"></div><div class="line">[dev-packages]</div><div class="line"></div><div class="line">[requires]</div><div class="line">python_version = &quot;3.6&quot;</div></pre></td></tr></table></figure>
<p>Pipfile.lock包含你的系统信息，所有已经安装包的依赖包以及其版本信息，所有安装包及依赖包的hash校验信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;_meta&quot;: &#123;</div><div class="line">        &quot;hash&quot;: &#123;</div><div class="line">            &quot;sha256&quot;: &quot;af58f3510cb613d4d9241128f9a0ceb9bb936ad907543e23ad8317011dcb6715&quot;</div><div class="line">        &#125;,</div><div class="line">        &quot;pipfile-spec&quot;: 6,</div><div class="line">        &quot;requires&quot;: &#123;</div><div class="line">            &quot;python_version&quot;: &quot;3.6&quot;</div><div class="line">        &#125;,</div><div class="line">        &quot;sources&quot;: [</div><div class="line">            &#123;</div><div class="line">                &quot;name&quot;: &quot;pypi&quot;,</div><div class="line">                &quot;url&quot;: &quot;https://pypi.org/simple&quot;,</div><div class="line">                &quot;verify_ssl&quot;: true</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    &quot;default&quot;: &#123;                </div><div class="line">         &quot;urllib3&quot;: &#123;</div><div class="line">            &quot;hashes&quot;: [</div><div class="line">                &quot;sha256:a68ac5e15e76e7e5dd2b8f94007233e01effe3e50e8daddf69acfd81cb686baf&quot;,</div><div class="line">                &quot;sha256:b5725a0bd4ba422ab0e66e89e030c806576753ea3ee08554382c14e685d117b5&quot;</div><div class="line">            ],</div><div class="line">            &quot;index&quot;: &quot;pypi&quot;,</div><div class="line">            &quot;version&quot;: &quot;==1.23&quot;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    &quot;develop&quot;: &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="安装开发环境下的包"><a href="#安装开发环境下的包" class="headerlink" title="安装开发环境下的包"></a>安装开发环境下的包</h4><p>加<code>--dev</code>表示包括 Pipfile 的 dev-packages 中的依赖。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv install httpie --dev</div></pre></td></tr></table></figure>
<h3 id="卸载第三方包"><a href="#卸载第三方包" class="headerlink" title="卸载第三方包"></a>卸载第三方包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv uninstall urllib3 //或者 pipenv uninstall --all</div></pre></td></tr></table></figure>
<h3 id="更新安装包"><a href="#更新安装包" class="headerlink" title="更新安装包"></a>更新安装包</h3><p>更新指定包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv update urllib3</div></pre></td></tr></table></figure>
<p>更新所有包（删除所有包，然后重新安装）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv update</div></pre></td></tr></table></figure>
<h3 id="进入-退出环境"><a href="#进入-退出环境" class="headerlink" title="进入|退出环境"></a>进入|退出环境</h3><p>进入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv shell</div></pre></td></tr></table></figure>
<p>在进入之后，可以直接输入python来查看当前python环境</p>
<p>退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">exit</div></pre></td></tr></table></figure>
<h3 id="查看虚拟环境目录"><a href="#查看虚拟环境目录" class="headerlink" title="查看虚拟环境目录"></a>查看虚拟环境目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ pipenv --venv</div><div class="line">/Users/xxx/.local/share/virtualenvs/test_pipenv-UtK8HKY2</div></pre></td></tr></table></figure>
<h3 id="查看项目根目录："><a href="#查看项目根目录：" class="headerlink" title="查看项目根目录："></a>查看项目根目录：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pipenv --where</div></pre></td></tr></table></figure>
<h3 id="检查软件包的完整性"><a href="#检查软件包的完整性" class="headerlink" title="检查软件包的完整性"></a>检查软件包的完整性</h3><p>你是否担心已安装的软件包有没有安全漏洞？没关系，pipenv 可以帮你检查，运行下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$  pipenv check</div><div class="line">Checking PEP 508 requirements…</div><div class="line">Passed!</div><div class="line">Checking installed package safety…</div><div class="line">All good!</div></pre></td></tr></table></figure>
<p>上面的命令根据 Pipfile 里的 PEP 508 标记检查安全漏洞。</p>
<h3 id="查看依赖树"><a href="#查看依赖树" class="headerlink" title="查看依赖树"></a>查看依赖树</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ pipenv graph</div><div class="line">httpie==0.9.9</div><div class="line">  - Pygments [required: &gt;=2.1.3, installed: 2.2.0]</div><div class="line">  - requests [required: &gt;=2.11.0, installed: 2.19.1]</div><div class="line">    - certifi [required: &gt;=2017.4.17, installed: 2018.4.16]</div><div class="line">    - chardet [required: &lt;3.1.0,&gt;=3.0.2, installed: 3.0.4]</div><div class="line">    - idna [required: &lt;2.8,&gt;=2.5, installed: 2.7]</div><div class="line">    - urllib3 [required: &gt;=1.21.1,&lt;1.24, installed: 1.23]</div></pre></td></tr></table></figure>
<h3 id="锁定版本"><a href="#锁定版本" class="headerlink" title="锁定版本"></a>锁定版本</h3><p>更新 lock 文件锁定当前环境的依赖版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pipenv lock</div></pre></td></tr></table></figure>
<h3 id="环境变量管理"><a href="#环境变量管理" class="headerlink" title="环境变量管理"></a>环境变量管理</h3><p>如果你开发调试时需要配一堆环境变量，可以写到 .env 文件中，在 pipenv shell 进入虚拟环境时，它会帮你把这些环境变量加载好，非常方便。</p>
<p>例如写一个 .env 文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo &quot;FOO=hello foo&quot; &gt; .env</div></pre></td></tr></table></figure>
<p>之后 pipenv shell 进入虚拟环境，echo $FOO 就能看环境变量的值 hello foo 已经设置好了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/20/UITableView偏移/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/20/UITableView偏移/" itemprop="url">UITableView偏移</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-20T10:20:34+08:00">
                2018-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>UITabelView是开发中经常会用的一个控件，在不同的系统中导致上下的偏移。下面就说说原因以及解决办法。</p>
<p>原因：</p>
<ul>
<li>滚动视图不能作为<code>SuperView</code>的第一子视图</li>
<li>scrollview的自动布局。</li>
</ul>
<p>在iOS7之后，系统会自动调整scrollview的<code>layout</code>和<code>contentInsets</code>，从而使其自动适应iOS7之后那种整个屏幕都可以放入自定义控件的方法。<br>而我们在大多数开发情况下并不希望受到系统的影响，因为要适配iOS6。</p>
<p>所以这部分的解决是</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ([[[<span class="built_in">UIDevice</span> currentDevice] systemVersion]compare:<span class="string">@"7.0"</span>]!=<span class="built_in">NSOrderedAscending</span>) &#123;  </div><div class="line">	<span class="comment">// edgesForExtendedLayout表示viewController中的scrollview使用什么样的contentInsets</span></div><div class="line">	<span class="keyword">self</span>.edgesForExtendedLayout = <span class="built_in">UIRectEdgeNone</span>;  </div><div class="line">	<span class="comment">// extendedLayoutIncludesOpaqueBars表示自适应的contentInsets是否包括statusBar的高度。tableView之所倚上移了20（即设置了UIRectEdgeNone），系统会认为没有了状态栏，所以contentInsets.top 自动减少20</span></div><div class="line">	<span class="keyword">self</span>.extendedLayoutIncludesOpaqueBars = <span class="literal">NO</span>;</div><div class="line">	<span class="keyword">self</span>.modalPresentationCapturesStatusBarAppearance = <span class="literal">NO</span>;  </div><div class="line">	<span class="comment">// automaticallyAdjustsScrollViewInsets表示子控件是否自动适配，适配了就是距离顶部64，不适配就是0</span></div><div class="line">	<span class="keyword">self</span>.automaticallyAdjustsScrollViewInsets=<span class="literal">NO</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在iOS11之后，废弃了<code>automaticallyAdjustsScrollViewInsets</code>，增加了<code>contentInsetAdjustmentBehavior</code></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (@available(iOS <span class="number">11.0</span>, *)) &#123;</div><div class="line">	<span class="keyword">self</span>.tableView.contentInsetAdjustmentBehavior = <span class="built_in">UIScrollViewContentInsetAdjustmentNever</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">	<span class="keyword">self</span>.automaticallyAdjustsScrollViewInsets = <span class="literal">NO</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/18/iOS网络请求参数类型为json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/18/iOS网络请求参数类型为json/" itemprop="url">iOS网络请求参数类型为json</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-18T14:43:37+08:00">
                2018-07-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近遇到一个比较不常见的网络请求，参数不是<code>dict</code>，而是一个<code>jsonStr</code>，相对来说比较少见。</p>
<p>接下来就直接看代码吧。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 这边是传递一个数组dataArr</span></div><div class="line"><span class="built_in">NSError</span> *jsonError;</div><div class="line">    </div><div class="line"><span class="comment">// json序列化</span></div><div class="line"><span class="built_in">NSData</span> *jsonData = [<span class="built_in">NSJSONSerialization</span> dataWithJSONObject:dataArr options:<span class="built_in">NSJSONWritingPrettyPrinted</span> error:&amp;jsonError];</div><div class="line"></div><div class="line"><span class="built_in">NSString</span> *jsonString = [[<span class="built_in">NSString</span> alloc] initWithData:jsonData encoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">    </div><div class="line"><span class="built_in">NSData</span> *objectData = [jsonString dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</div><div class="line">    </div><div class="line">    </div><div class="line"><span class="built_in">NSDictionary</span> *jsonDic = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:objectData options:<span class="built_in">NSJSONReadingMutableContainers</span> error:&amp;jsonError];</div></pre></td></tr></table></figure>
<p>以上就搞定了，直接传这个<code>jsonDic</code>就可以给后台了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/07/设计模式-克隆/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/07/设计模式-克隆/" itemprop="url">设计模式-克隆</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-07T16:40:03+08:00">
                2018-05-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有时候创建几个类似的对象觉得麻烦，都是重复代码。一般的做法是，抽取一个公用方法，放在分类中。也有另外一种，克隆</p>
<p>定义一个协议</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Protocol.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">PrototypeCopyProtocol</span> &lt;<span class="title">NSObject</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// 复制自己</span></div><div class="line">- (<span class="keyword">id</span>)clone;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>自定义类遵守这个协议</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// Student.m</div><div class="line"></div><div class="line">@implementation StudentModel</div><div class="line"></div><div class="line">- (id)clone &#123;</div><div class="line">    StudentModel *student = [[[self class] alloc] init];</div><div class="line">    student.name = self.name;</div><div class="line">    student.age = self.age;</div><div class="line">    student.address = self.address;</div><div class="line">    student.totalScore = self.totalScore;</div><div class="line">    </div><div class="line">    return student;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<p>这样代码中就是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">	// 学生1</div><div class="line">    StudentModel *stu1 = [[StudentModel alloc] init];</div><div class="line">    stu1.name = @&quot;张三&quot;;</div><div class="line">    stu1.age = @(18);</div><div class="line">    stu1.address = @&quot;帝都&quot;;</div><div class="line">    stu1.totalScore = @(99);</div><div class="line">    </div><div class="line">    // 学生2</div><div class="line">//    StudentModel *stu2 = [[StudentModel alloc] init];</div><div class="line">//    stu2.name = @&quot;李四&quot;;</div><div class="line">//    stu2.age = @(18);</div><div class="line">//    stu2.address = @&quot;帝都&quot;;</div><div class="line">//    stu2.totalScore = @(99);</div><div class="line">    </div><div class="line">    // 学生3</div><div class="line">    StudentModel *stu3 = [stu1 clone];</div><div class="line">    stu3.name = @&quot;王五&quot;;</div></pre></td></tr></table></figure>
<p>这个其实就是NSCopying协议</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/02/设计模式-命令模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/02/设计模式-命令模式/" itemprop="url">命令模式-设计模式.md</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-02T20:38:36+08:00">
                2018-05-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>命令模式（Command Pattern）是一种数据驱动的设计模式，它属于行为型模式。请求以命令的形式包裹在对象中，并传给调用对象。调用对象寻找可以处理该命令的合适的对象，并把该命令传给相应的对象，该对象执行命令。</p>
<p>适用场景：对行为进行记录、撤销或者重做等处理。比如：画图，拍照等实际场景</p>
<h4 id="1-创建一个命令接口"><a href="#1-创建一个命令接口" class="headerlink" title="1. 创建一个命令接口"></a>1. 创建一个命令接口</h4><p>规范命令的类给外部调用的接口，下面的两个命令类会用到。</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Potocol.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">CZCommandPotocol</span> &lt;<span class="title">NSObject</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// 执行</span></div><div class="line">- (<span class="keyword">void</span>)excute;</div><div class="line"><span class="comment">// 撤销</span></div><div class="line">- (<span class="keyword">void</span>)withdraw;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h4 id="2-创建一个请求类"><a href="#2-创建一个请求类" class="headerlink" title="2. 创建一个请求类"></a>2. 创建一个请求类</h4><p>具体的实现细节</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// CZCommandReceiver.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZCommandReceiver</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="comment">// 接收者的view</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *receiverView;</div><div class="line"></div><div class="line"><span class="comment">// 变暗的接口</span></div><div class="line">- (<span class="keyword">void</span>)mackeDarker:(<span class="built_in">CGFloat</span>)pamameter;</div><div class="line"></div><div class="line"><span class="comment">// 变亮的接口</span></div><div class="line">- (<span class="keyword">void</span>)mackeLighter:(<span class="built_in">CGFloat</span>)pamameter;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// CZCommandReceiver.m</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">"CZCommandReceiver.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZCommandReceiver</span> ()</span></div><div class="line"></div><div class="line"><span class="comment">/** white */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> white;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> alpha;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CZCommandReceiver</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setReceiverView:(<span class="built_in">UIView</span> *)receiverView &#123;</div><div class="line">    <span class="comment">// 获取数值</span></div><div class="line">    _receiverView = receiverView;</div><div class="line">    <span class="built_in">UIColor</span> *color = _receiverView.backgroundColor;</div><div class="line">    [color getWhite:&amp;_white alpha:&amp;_alpha];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 变暗的接口</span></div><div class="line">- (<span class="keyword">void</span>)mackeDarker:(<span class="built_in">CGFloat</span>)pamameter &#123;</div><div class="line">    <span class="keyword">self</span>.white -= pamameter;</div><div class="line">    <span class="comment">// 设置取值范围</span></div><div class="line">    <span class="keyword">self</span>.white = MAX(<span class="number">0</span>, <span class="keyword">self</span>.white);</div><div class="line">    </div><div class="line">    <span class="comment">// 设置背景色</span></div><div class="line">    <span class="keyword">self</span>.receiverView.backgroundColor = [<span class="built_in">UIColor</span> colorWithWhite:<span class="keyword">self</span>.white alpha:<span class="keyword">self</span>.alpha];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 变亮的接口</span></div><div class="line">- (<span class="keyword">void</span>)mackeLighter:(<span class="built_in">CGFloat</span>)pamameter &#123;</div><div class="line">    <span class="keyword">self</span>.white += pamameter;</div><div class="line">    <span class="comment">// 设置取值范围</span></div><div class="line">    <span class="keyword">self</span>.white = MIN(<span class="number">1</span>, <span class="keyword">self</span>.white);</div><div class="line">    </div><div class="line">    <span class="comment">// 设置背景色</span></div><div class="line">    <span class="keyword">self</span>.receiverView.backgroundColor = [<span class="built_in">UIColor</span> colorWithWhite:<span class="keyword">self</span>.white alpha:<span class="keyword">self</span>.alpha];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-创建两个命令类"><a href="#3-创建两个命令类" class="headerlink" title="3. 创建两个命令类"></a>3. 创建两个命令类</h4><p>命令类就是请求类的一个封装</p>
<p>屏幕变暗</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// DarkenCommand.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZCommandPotocol.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZCommandReceiver.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZDarkenCommand</span> : <span class="title">NSObject</span> &lt;<span class="title">CZCommandPotocol</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// 绑定接收器</span></div><div class="line">- (<span class="keyword">instancetype</span>)initWithReceiver:(CZCommandReceiver *)receiver paramter:(<span class="built_in">CGFloat</span>)paramter;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// .m</span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZDarkenCommand.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZDarkenCommand</span> ()</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) CZCommandReceiver *receiver;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> paramter;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CZDarkenCommand</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)initWithReceiver:(CZCommandReceiver *)receiver paramter:(<span class="built_in">CGFloat</span>)paramter &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">self</span>.receiver = receiver;</div><div class="line">        <span class="keyword">self</span>.paramter = paramter;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 执行命令</span></div><div class="line">- (<span class="keyword">void</span>)excute &#123;</div><div class="line">    [<span class="keyword">self</span>.receiver mackeDarker:<span class="keyword">self</span>.paramter];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 撤销命令</span></div><div class="line">- (<span class="keyword">void</span>)withdraw &#123;</div><div class="line">    [<span class="keyword">self</span>.receiver mackeLighter:<span class="keyword">self</span>.paramter];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>屏幕变亮</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// LightenCommand.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZCommandPotocol.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZCommandReceiver.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZLightenCommand</span> : <span class="title">NSObject</span> &lt;<span class="title">CZCommandPotocol</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// 绑定接收器</span></div><div class="line">- (<span class="keyword">instancetype</span>)initWithReceiver:(CZCommandReceiver *)receiver paramter:(<span class="built_in">CGFloat</span>)paramter;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// .m</span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZLightenCommand.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZLightenCommand</span>()</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) CZCommandReceiver *receiver;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> paramter;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CZLightenCommand</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)initWithReceiver:(CZCommandReceiver *)receiver paramter:(<span class="built_in">CGFloat</span>)paramter &#123;</div><div class="line">    </div><div class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</div><div class="line">        </div><div class="line">        <span class="keyword">self</span>.receiver = receiver;</div><div class="line">        <span class="keyword">self</span>.paramter = paramter;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 执行命令</span></div><div class="line">- (<span class="keyword">void</span>)excute &#123;</div><div class="line">    [<span class="keyword">self</span>.receiver mackeLighter:<span class="keyword">self</span>.paramter];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 撤销命令</span></div><div class="line">- (<span class="keyword">void</span>)withdraw &#123;</div><div class="line">    [<span class="keyword">self</span>.receiver mackeDarker:<span class="keyword">self</span>.paramter];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h4 id="4-创建命令调用者"><a href="#4-创建命令调用者" class="headerlink" title="4. 创建命令调用者"></a>4. 创建命令调用者</h4><p>调用命令类的类，其中保存了执行过的命令操作，这个就是调用者类的意义</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  CZInvoke.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZCommandPotocol.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZInvoke</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line">+ (<span class="keyword">instancetype</span>)sharedInstance;</div><div class="line"></div><div class="line"><span class="comment">// 回退指令</span></div><div class="line">- (<span class="keyword">void</span>)goBack;</div><div class="line"></div><div class="line"><span class="comment">// 添加操作指令</span></div><div class="line">- (<span class="keyword">void</span>)addAndExcute:(<span class="keyword">id</span> &lt;CZCommandPotocol&gt;)command;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// .m</span></div><div class="line"><span class="meta">#import <span class="meta-string">"CZInvoke.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CZInvoke</span> ()</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span> *array;  <span class="comment">// 存储操作的</span></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CZInvoke</span></span></div><div class="line"></div><div class="line">+ (<span class="keyword">instancetype</span>)sharedInstance</div><div class="line">&#123;</div><div class="line">    <span class="keyword">static</span> CZInvoke *sharedInstance = <span class="literal">nil</span>;</div><div class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</div><div class="line">    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</div><div class="line">        sharedInstance = [[<span class="keyword">self</span> alloc] init];</div><div class="line">        sharedInstance.array = [<span class="built_in">NSMutableArray</span> array];</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">return</span> sharedInstance;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 回退指令</span></div><div class="line">- (<span class="keyword">void</span>)goBack &#123;</div><div class="line">    <span class="comment">// 1.获取数组中的最后一个操作</span></div><div class="line">    <span class="keyword">id</span> &lt;CZCommandPotocol&gt; command = <span class="keyword">self</span>.array.lastObject;</div><div class="line">    </div><div class="line">    <span class="comment">// 2.操作调用,撤销的步骤</span></div><div class="line">    [command withdraw];</div><div class="line">    </div><div class="line">    <span class="comment">// 3.删除最后操作</span></div><div class="line">    [<span class="keyword">self</span>.array removeLastObject];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 添加操作指令</span></div><div class="line">- (<span class="keyword">void</span>)addAndExcute:(<span class="keyword">id</span> &lt;CZCommandPotocol&gt;)command &#123;</div><div class="line">    <span class="comment">// 1.把操作添加到数组</span></div><div class="line">    [<span class="keyword">self</span>.array addObject:command];</div><div class="line">    </div><div class="line">    <span class="comment">// 2.让操作调用实现的协议方法</span></div><div class="line">    [command excute];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h4 id="5-使用Invoke接受并执行命令"><a href="#5-使用Invoke接受并执行命令" class="headerlink" title="5. 使用Invoke接受并执行命令"></a>5. 使用Invoke接受并执行命令</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">	CZCommandReceiver *receiver = [[CZCommandReceiver alloc] init];</div><div class="line">    <span class="keyword">self</span>.receiver = receiver;</div><div class="line">    <span class="keyword">self</span>.receiver.receiverView = <span class="keyword">self</span>.view;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)btnClick:(<span class="built_in">UIButton</span> *)sender &#123;</div><div class="line">    <span class="keyword">if</span> (sender.tag == <span class="number">10</span>) &#123;</div><div class="line">        CZDarkenCommand *command = [[CZDarkenCommand alloc] initWithReceiver:<span class="keyword">self</span>.receiver paramter:<span class="number">0.1</span>];</div><div class="line">        [[CZInvoke sharedInstance] addAndExcute:command];</div><div class="line"><span class="comment">//        [self.receiver mackeDarker:0.1];</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sender.tag == <span class="number">20</span>) &#123;</div><div class="line">        </div><div class="line">        CZLightenCommand *command = [[CZLightenCommand alloc] initWithReceiver:<span class="keyword">self</span>.receiver paramter:<span class="number">0.1</span>];</div><div class="line">        [[CZInvoke sharedInstance] addAndExcute:command];</div><div class="line">        </div><div class="line"><span class="comment">//        [self.receiver mackeLighter:0.1];</span></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        [[CZInvoke sharedInstance] goBack];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/20/设计模式-责任链/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/20/设计模式-责任链/" itemprop="url">设计模式-责任链</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-20T10:38:08+08:00">
                2018-04-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/设计模式/" itemprop="url" rel="index">
                    <span itemprop="name">设计模式</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="设计模式-责任链"><a href="#设计模式-责任链" class="headerlink" title="设计模式 - 责任链"></a>设计模式 - 责任链</h2><p>小明想买一包薯片，去了超市，一掏裤兜，一张10块出现在眼前，毫不犹豫，买了。<br>正在前往收银台中，小明发现有一本十分酷炫的保时捷模型，¥1288，天价啊，好想买，怎么办呢，立刻给老爸下跪，“爸爸我喜欢那辆车”，爸爸无奈，掏出手机结账。</p>
<p>此时开开心心去买单，此时又出现了Sony最新款电视，小明爸爸心想，搭配自家的ps4，游戏体验上升50%，价格16880，妈蛋，经济大权都在老婆手中，于是出现了以下情景：<br>爸爸苦苦哀求妈妈买电视<br><img src="https://img3.doubanio.com/view/photo/l/public/p1436301645.webp" alt=""></p>
<p>小明妈妈抵制不住哀怨的小眼神，买了</p>
<p>故事结束。这就是一个责任链：</p>
<ul>
<li>A处理不了就交给B</li>
<li>B处理不了就交给C</li>
<li>C处理不了就交给D</li>
</ul>
<h3 id="在代码中的展现"><a href="#在代码中的展现" class="headerlink" title="在代码中的展现"></a>在代码中的展现</h3><p>这个就像一个遍历数组，找到合适的就处理，不合适就继续往下</p>
<ul>
<li>创建一个Baby类</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Baby.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, BabyState) &#123;</div><div class="line">    BabyStateWannoPlay = <span class="number">0</span>,</div><div class="line">    BabyStateWannoPoo,</div><div class="line">    BabyStateWannoHungry,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Baby</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="comment">/** name */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) BabyState state;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<ul>
<li>创建Handler基类</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// BaseHandler.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">"Baby.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">BaseHandler</span> : <span class="title">NSObject</span></span></div><div class="line"></div><div class="line"><span class="comment">//   a -&gt; b -&gt; c    a处理不了就交给b，b处理不了就交给c</span></div><div class="line"></div><div class="line"><span class="comment">/** 下一个责任人 */</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) BaseHandler *nextHandler;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)processModel:(Baby *)baby;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// BaseHandler.m</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CZBaseHandler</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)processModel:(CZRCBaby *)baby</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.nextHandler) &#123;</div><div class="line">        [<span class="keyword">self</span>.nextHandler processModel:baby];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<ul>
<li>创建奶奶</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Grandma.m</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CZRCHandlerA</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)processModel:(CZRCBaby *)baby</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (baby.babyState == RCBabyStateWannoPlay) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"奶奶陪着玩"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"交给爸爸了"</span>);</div><div class="line">        [<span class="keyword">self</span>.nextHandler processModel:baby];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<ul>
<li>创建爸爸</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Papa.m</span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)processModel:(CZRCBaby *)baby</div><div class="line">&#123;</div><div class="line">    <span class="keyword">if</span> (baby.babyState == RCBabyStateWannoPoo) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"老爸给他换尿布了"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"交给妈妈喂奶了"</span>);</div><div class="line">        [<span class="keyword">self</span>.nextHandler processModel:baby];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以此类推</p>
<p>最后就是搭建这个链条了</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// VC.m</span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    <span class="comment">// Do any additional setup after loading the view.</span></div><div class="line">    </div><div class="line">       </div><div class="line">    CZBaseHandler *handlerA = [[CZRCHandlerGrandma alloc] init];</div><div class="line">    CZBaseHandler *handlerB = [[CZRCHandlerPapa alloc] init];</div><div class="line">    CZBaseHandler *handlerC = [[CZRCHandlerMon alloc] init];</div><div class="line">    </div><div class="line">    CZRCBaby *baby = [[CZRCBaby alloc] init];</div><div class="line">    baby.babyState = RCBabyStateWannoPlay;</div><div class="line">    </div><div class="line">    handlerA.nextHandler = handlerB;</div><div class="line">    handlerB.nextHandler = handlerC;</div><div class="line">    </div><div class="line">    [handlerA processModel:baby];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="责任链的协议写法"><a href="#责任链的协议写法" class="headerlink" title="责任链的协议写法"></a>责任链的协议写法</h3><p>增加一个协议，协议中添加必要的属性和方法</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// TestProtocol.h</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">TestProtocol</span> &lt;<span class="title">NSObject</span>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="keyword">id</span> &lt;TestProtocol&gt; handler;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)handlerResquest:(<span class="keyword">id</span>)request;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>其他的如上，不同之处在于，遵守协议，以及添加私有变量</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Papa.h</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PapaHandler</span> : <span class="title">NSObject</span> &lt;<span class="title">TestProtocol</span>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Papa.m</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">PapaHandler</span> ()</span></div><div class="line"></div><div class="line">@proprety (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="keyword">id</span> &lt;TestProtocol&gt; nextHandler</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">PapaHandler</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)handlerRequest:(<span class="keyword">id</span>)request &#123;</div><div class="line">	[<span class="keyword">self</span>.nextHandler handlerRequest:request];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setHandler:(<span class="keyword">id</span>&lt;TestProtocol&gt;)handler &#123;</div><div class="line">	<span class="keyword">self</span>.nextHandler = handler;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">id</span>&lt;TestProtocol&gt;)handler &#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">self</span>.nextHandler;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/27/多个target的OC和Swift混编/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/27/多个target的OC和Swift混编/" itemprop="url">多个target的OC和Swift混编</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-27T16:55:49+08:00">
                2017-02-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/swift和OC混编/" itemprop="url" rel="index">
                    <span itemprop="name">swift和OC混编</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>#OC和Swift混编</p>
<h2 id="1-appDelegate从OC转为swift"><a href="#1-appDelegate从OC转为swift" class="headerlink" title="1. appDelegate从OC转为swift"></a>1. appDelegate从OC转为swift</h2><p>在OC中，程序的入口是在<code>main.m</code>中，但是在swift中，你应该找不到这个东西，那么这个入口到底是在哪里呢</p>
<p>如果你仔细看的话，就在AppDelegate.swift中</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> UIKit</div><div class="line"></div><div class="line"><span class="meta">@UIApplicationMain</span> <span class="comment">// 就是这一句啦</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</div><div class="line">	....</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其他的配置就不需要改变了</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/02/27/多个target的OC和Swift混编/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/24/21-扩展/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/24/21-扩展/" itemprop="url">21.扩展</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-24T18:00:55+08:00">
                2017-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/swift基本语法/" itemprop="url" rel="index">
                    <span itemprop="name">swift基本语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>扩展 就是为一个已有的类、结构体、枚举类型或者协议类型添加新功能。这包括在没有权限获取原始源代码的情 况下扩展类型的能力(即 ==逆向建模== )。扩展和 Objective-C 中的分类类似。(与 Objective-C 不同的是，Swi ft 的扩展没有名字。)</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/02/24/21-扩展/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/24/20-嵌套类型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChefZhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱里库码">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/24/20-嵌套类型/" itemprop="url">20.嵌套类型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-02-24T18:00:46+08:00">
                2017-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/swift基本语法/" itemprop="url" rel="index">
                    <span itemprop="name">swift基本语法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="嵌套类型"><a href="#嵌套类型" class="headerlink" title="嵌套类型"></a>嵌套类型</h2><p>要在一个类型中嵌套另一个类型，将嵌套类型的定义写在其外部类型的 <code>{}</code> 内，而且可以根据需要定义多级嵌套。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/02/24/20-嵌套类型/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ChefZhang</p>
              <p class="site-description motion-element" itemprop="description">好像没什么比自由更加重要了</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ChefZhang</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
